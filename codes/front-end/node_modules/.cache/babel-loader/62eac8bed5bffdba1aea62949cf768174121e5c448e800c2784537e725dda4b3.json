{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      username: '',\n      password: '',\n      usernameError: '',\n      passwordError: '',\n      userData: {\n        username: '',\n        password: '',\n        nickname: '',\n        gender: '',\n        telephone: ''\n      }\n    };\n  },\n  mounted() {\n    const signInBtn = document.getElementById(\"signIn\");\n    const signUpBtn = document.getElementById(\"signUp\");\n    const fistForm = document.getElementById(\"form1\");\n    const secondForm = document.getElementById(\"form2\");\n    const container = document.querySelector(\".container\");\n    signInBtn.addEventListener(\"click\", () => {\n      container.classList.remove(\"right-panel-active\");\n    });\n    signUpBtn.addEventListener(\"click\", () => {\n      container.classList.add(\"right-panel-active\");\n    });\n    fistForm.addEventListener(\"submit\", e => e.preventDefault());\n    secondForm.addEventListener(\"submit\", e => e.preventDefault());\n  },\n  methods: {\n    validateUsername() {\n      const usernamePattern = /^[a-zA-Z0-9]+$/;\n      if (this.username.length < 3 || this.username.length > 15 || !usernamePattern.test(this.username)) {\n        this.usernameError = '用户名应为3到15个字符，只能包含字母和数字';\n      } else {\n        this.usernameError = '';\n      }\n    },\n    validatePassword() {\n      const passwordPattern = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/;\n      if (this.password.length < 8 || this.password.length > 20 || !passwordPattern.test(this.password)) {\n        this.passwordError = '密码应为8到20个字符，必须包含至少一个字母和一个数字';\n      } else {\n        this.passwordError = '';\n      }\n    },\n    login() {\n      this.usernameError = '';\n      this.passwordError = '';\n      const requestData = new URLSearchParams();\n      requestData.append('username', this.username);\n      requestData.append('password', this.password);\n      this.axios.post('http://192.168.184.1:8000/tms/login', requestData, {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      }).then(response => {\n        if (response.data.code === 200 && response.data.message === \"登录成功\") {\n          const token = response.data.data.access_token;\n          console.log(\"获取到的token是：\" + token);\n          localStorage.setItem('access_token', token);\n          //this.$router.push('/users'); // 登录成功后导航到受保护页面\n        } else if (response.data.message === \"用户名不存在\") {\n          alert('用户名输入不正确，请重新输入。');\n        } else if (response.data.message === \"用户密码错误\") {\n          alert('密码输入不正确，请重新输入。');\n        }\n      }).catch(error => {\n        console.error('登录过程中发生错误:', error);\n      });\n    },\n    registerUser() {\n      axios.post('http://192.168.184.1:8000/tms/register', this.userData).then(response => {\n        this.registrationResult = response.data.message;\n      }).catch(error => {\n        this.registrationResult = '注册失败：' + error.response.data.message;\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","data","username","password","usernameError","passwordError","userData","nickname","gender","telephone","mounted","signInBtn","document","getElementById","signUpBtn","fistForm","secondForm","container","querySelector","addEventListener","classList","remove","add","e","preventDefault","methods","validateUsername","usernamePattern","length","test","validatePassword","passwordPattern","login","requestData","URLSearchParams","append","post","headers","then","response","code","message","token","access_token","console","log","localStorage","setItem","alert","catch","error","registerUser","registrationResult"],"sources":["src/views/Element/LoginView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container-all\">\r\n  <div class=\"container right-panel-active\">\r\n    <!-- 注册 -->\r\n    <div class=\"container__form container--signup\">\r\n      <form @submit.prevent=\"registerUser\" action=\"#\" class=\"form\" id=\"form1\">\r\n        <h2 class=\"form__title\">注册</h2>\r\n        <input type=\"text\" placeholder=\"用户名\" class=\"input\" v-model=\"userData.username\" required/>\r\n        <input type=\"password\" placeholder=\"密码\" class=\"input\" v-model=\"userData.password\" required/>\r\n        <input type=\"text\" placeholder=\"昵称\" class=\"input\" v-model=\"userData.nickname\" required/>\r\n        <div class=\"form-group\">\r\n          <label for=\"gender\">性别：</label>\r\n          <select id=\"gender\" v-model=\"userData.gender\" required>\r\n            <option value=\"男\">男</option>\r\n            <option value=\"女\">女</option>\r\n            <option value=\"保密\">保密</option>\r\n          </select>\r\n        </div>\r\n        <input type=\"text\" placeholder=\"电话\" class=\"input\" v-model=\"userData.telephone\" required/>\r\n        <button type=\"submit\" class=\"btn\">注册</button>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- 登录 -->\r\n    <div id=\"app\" class=\"container__form container--signin\">\r\n      <form action=\"#\" class=\"form\" id=\"form2\" @submit.prevent=\"login\">\r\n        <h2 class=\"form__title\">登录</h2>\r\n        <input type=\"username\" placeholder=\"用户名\" class=\"input\" v-model=\"username\" minlength=\"3\"\r\n               maxlength=\"15\"\r\n               pattern=\"[a-zA-Z0-9]+\"\r\n               @input=\"validateUsername\" required/>\r\n        <span v-if=\"usernameError\" class=\"error-message\">{{ usernameError }}</span>\r\n        <input type=\"password\" placeholder=\"密码\" class=\"input\" v-model=\"password\" minlength=\"8\"\r\n               maxlength=\"20\"\r\n               pattern=\"(?=.*[a-zA-Z])(?=.*[0-9]).{8,}\"\r\n               @input=\"validatePassword\" required/>\r\n        <span v-if=\"passwordError\" class=\"error-message\">{{ passwordError }}</span>\r\n        <button class=\"btn\" type=\"submit\">登录</button>\r\n      </form>\r\n    </div>\r\n\r\n    <!-- 覆盖层 -->\r\n    <div class=\"container__overlay\">\r\n      <div class=\"overlay\">\r\n        <div class=\"overlay__panel overlay--left\">\r\n          <button class=\"btn\" id=\"signIn\">登录</button>\r\n        </div>\r\n        <div class=\"overlay__panel overlay--right\">\r\n          <button class=\"btn\" id=\"signUp\">注册</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      usernameError: '',\r\n      passwordError: '',\r\n      userData: {\r\n        username: '',\r\n        password: '',\r\n        nickname: '',\r\n        gender: '',\r\n        telephone: ''\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    const signInBtn = document.getElementById(\"signIn\");\r\n    const signUpBtn = document.getElementById(\"signUp\");\r\n    const fistForm = document.getElementById(\"form1\");\r\n    const secondForm = document.getElementById(\"form2\");\r\n    const container = document.querySelector(\".container\");\r\n\r\n    signInBtn.addEventListener(\"click\", () => {\r\n      container.classList.remove(\"right-panel-active\");\r\n    });\r\n\r\n    signUpBtn.addEventListener(\"click\", () => {\r\n      container.classList.add(\"right-panel-active\");\r\n    });\r\n\r\n    fistForm.addEventListener(\"submit\", (e) => e.preventDefault());\r\n    secondForm.addEventListener(\"submit\", (e) => e.preventDefault());\r\n  },\r\n    methods: {\r\n      validateUsername() {\r\n        const usernamePattern = /^[a-zA-Z0-9]+$/;\r\n        if (this.username.length < 3 || this.username.length > 15 || !usernamePattern.test(this.username)) {\r\n          this.usernameError = '用户名应为3到15个字符，只能包含字母和数字';\r\n        } else {\r\n          this.usernameError = '';\r\n        }\r\n      },\r\n      validatePassword() {\r\n        const passwordPattern = /^(?=.*[a-zA-Z])(?=.*[0-9]).{8,20}$/;\r\n        if (this.password.length < 8 || this.password.length > 20 || !passwordPattern.test(this.password)) {\r\n          this.passwordError = '密码应为8到20个字符，必须包含至少一个字母和一个数字';\r\n        } else {\r\n          this.passwordError = '';\r\n        }\r\n      },\r\n      login() {\r\n        this.usernameError = '';\r\n        this.passwordError = '';\r\n\r\n        const requestData = new URLSearchParams();\r\n        requestData.append('username', this.username);\r\n        requestData.append('password', this.password);\r\n\r\n        this.axios.post('http://192.168.184.1:8000/tms/login', requestData, {\r\n          headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded'\r\n          }\r\n        }).then(response => {\r\n          if (response.data.code === 200 && response.data.message === \"登录成功\") {\r\n            const token = response.data.data.access_token;\r\n            console.log(\"获取到的token是：\"+token);\r\n            localStorage.setItem('access_token', token);\r\n            //this.$router.push('/users'); // 登录成功后导航到受保护页面\r\n          } else if (response.data.message === \"用户名不存在\") {\r\n            alert('用户名输入不正确，请重新输入。');\r\n          } else if (response.data.message === \"用户密码错误\") {\r\n            alert('密码输入不正确，请重新输入。');\r\n          }\r\n            })\r\n            .catch(error => {\r\n              console.error('登录过程中发生错误:', error);\r\n            });\r\n      },\r\n      registerUser() {\r\n        axios.post('http://192.168.184.1:8000/tms/register', this.userData)\r\n            .then(response => {\r\n              this.registrationResult = response.data.message;\r\n            })\r\n            .catch(error => {\r\n              this.registrationResult = '注册失败：' + error.response.data.message;\r\n            });\r\n      }\r\n    }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n:root {\r\n  /* COLORS */\r\n  --white: #e9e9e9;\r\n  --gray: #333;\r\n  --blue: #0367a6;\r\n  --lightblue: #008997;\r\n\r\n  /* RADII */\r\n  --button-radius: 0.7rem;\r\n\r\n  /* SIZES */\r\n  --max-width: 758px;\r\n  --max-height: 420px;\r\n\r\n  font-size: 16px;\r\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\r\n  Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\r\n}\r\n\r\n.container right-panel-active {\r\n  align-items: center;\r\n  background-color: var(--white);\r\n  background: url(\"https://res.cloudinary.com/dbhnlktrv/image/upload/v1599997626/background_oeuhe7.jpg\");\r\n  /* 决定背景图像的位置是在视口内固定，或者随着包含它的区块滚动。 */\r\n  /* https://developer.mozilla.org/zh-CN/docs/Web/CSS/background-attachment */\r\n  background-attachment: fixed;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  display: grid;\r\n  height: 100vh;\r\n  place-items: center;\r\n}\r\n\r\n.form__title {\r\n  font-weight: 300;\r\n  margin: 0;\r\n  margin-bottom: 1.25rem;\r\n}\r\n\r\n.link {\r\n  color: var(--gray);\r\n  font-size: 0.9rem;\r\n  margin: 1.5rem 0;\r\n  text-decoration: none;\r\n}\r\n\r\n.container {\r\n  background-color: var(--white);\r\n  border-radius: var(--button-radius);\r\n  box-shadow: 0 0.9rem 1.7rem rgba(0, 0, 0, 0.25),\r\n  0 0.7rem 0.7rem rgba(0, 0, 0, 0.22);\r\n  height: var(--max-height);\r\n  max-width: var(--max-width);\r\n  overflow: hidden;\r\n  position: relative;\r\n  width: 100%;\r\n}\r\n\r\n.container__form {\r\n  height: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n  transition: all 0.6s ease-in-out;\r\n}\r\n\r\n.container--signin {\r\n  left: 0;\r\n  width: 50%;\r\n  z-index: 2;\r\n}\r\n\r\n.container.right-panel-active .container--signin {\r\n  transform: translateX(100%);\r\n}\r\n\r\n.container--signup {\r\n  left: 0;\r\n  opacity: 0;\r\n  width: 50%;\r\n  z-index: 1;\r\n}\r\n\r\n.container.right-panel-active .container--signup {\r\n  animation: show 0.6s;\r\n  opacity: 1;\r\n  transform: translateX(100%);\r\n  z-index: 5;\r\n}\r\n\r\n.container__overlay {\r\n  height: 100%;\r\n  left: 50%;\r\n  overflow: hidden;\r\n  position: absolute;\r\n  top: 0;\r\n  transition: transform 0.6s ease-in-out;\r\n  width: 50%;\r\n  z-index: 100;\r\n}\r\n\r\n.container.right-panel-active .container__overlay {\r\n  transform: translateX(-100%);\r\n}\r\n\r\n.overlay {\r\n  background-color: var(--lightblue);\r\n  background: url(\"https://res.cloudinary.com/dbhnlktrv/image/upload/v1599997626/background_oeuhe7.jpg\");\r\n  background-attachment: fixed;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  height: 100%;\r\n  left: -100%;\r\n  position: relative;\r\n  transform: translateX(0);\r\n  transition: transform 0.6s ease-in-out;\r\n  width: 200%;\r\n}\r\n\r\n.container.right-panel-active .overlay {\r\n  transform: translateX(50%);\r\n}\r\n\r\n.overlay__panel {\r\n  align-items: center;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  justify-content: center;\r\n  position: absolute;\r\n  text-align: center;\r\n  top: 0;\r\n  transform: translateX(0);\r\n  transition: transform 0.6s ease-in-out;\r\n  width: 50%;\r\n}\r\n\r\n.overlay--left {\r\n  transform: translateX(-20%);\r\n}\r\n\r\n.container.right-panel-active .overlay--left {\r\n  transform: translateX(0);\r\n}\r\n\r\n.overlay--right {\r\n  right: 0;\r\n  transform: translateX(0);\r\n}\r\n\r\n.container.right-panel-active .overlay--right {\r\n  transform: translateX(20%);\r\n}\r\n\r\n.btn {\r\n  background-color: var(--blue);\r\n  background-image: linear-gradient(90deg, var(--blue) 0%, var(--lightblue) 74%);\r\n  border-radius: 20px;\r\n  border: 1px solid var(--blue);\r\n  color: var(--white);\r\n  cursor: pointer;\r\n  font-size: 0.8rem;\r\n  font-weight: bold;\r\n  letter-spacing: 0.1rem;\r\n  padding: 0.9rem 4rem;\r\n  text-transform: uppercase;\r\n  transition: transform 80ms ease-in;\r\n}\r\n\r\n.form>.btn {\r\n  margin-top: 1.5rem;\r\n}\r\n\r\n.btn:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.btn:focus {\r\n  outline: none;\r\n}\r\n\r\n.form {\r\n  background-color: var(--white);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n  padding: 0 3rem;\r\n  height: 100%;\r\n  text-align: center;\r\n}\r\n\r\n.input {\r\n  background-color: #fff;\r\n  border: none;\r\n  padding: 0.9rem 0.9rem;\r\n  margin: 0.5rem 0;\r\n  width: 100%;\r\n}\r\n\r\n@keyframes show {\r\n\r\n  0%,\r\n  49.99% {\r\n    opacity: 0;\r\n    z-index: 1;\r\n  }\r\n\r\n  50%,\r\n  100% {\r\n    opacity: 1;\r\n    z-index: 5;\r\n  }\r\n}\r\n</style>"],"mappings":";;;AAyDA,OAAAA,KAAA;AAEA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,QAAA;MACAC,aAAA;MACAC,aAAA;MACAC,QAAA;QACAJ,QAAA;QACAC,QAAA;QACAI,QAAA;QACAC,MAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,MAAAC,SAAA,GAAAC,QAAA,CAAAC,cAAA;IACA,MAAAC,SAAA,GAAAF,QAAA,CAAAC,cAAA;IACA,MAAAE,QAAA,GAAAH,QAAA,CAAAC,cAAA;IACA,MAAAG,UAAA,GAAAJ,QAAA,CAAAC,cAAA;IACA,MAAAI,SAAA,GAAAL,QAAA,CAAAM,aAAA;IAEAP,SAAA,CAAAQ,gBAAA;MACAF,SAAA,CAAAG,SAAA,CAAAC,MAAA;IACA;IAEAP,SAAA,CAAAK,gBAAA;MACAF,SAAA,CAAAG,SAAA,CAAAE,GAAA;IACA;IAEAP,QAAA,CAAAI,gBAAA,WAAAI,CAAA,IAAAA,CAAA,CAAAC,cAAA;IACAR,UAAA,CAAAG,gBAAA,WAAAI,CAAA,IAAAA,CAAA,CAAAC,cAAA;EACA;EACAC,OAAA;IACAC,iBAAA;MACA,MAAAC,eAAA;MACA,SAAAzB,QAAA,CAAA0B,MAAA,aAAA1B,QAAA,CAAA0B,MAAA,UAAAD,eAAA,CAAAE,IAAA,MAAA3B,QAAA;QACA,KAAAE,aAAA;MACA;QACA,KAAAA,aAAA;MACA;IACA;IACA0B,iBAAA;MACA,MAAAC,eAAA;MACA,SAAA5B,QAAA,CAAAyB,MAAA,aAAAzB,QAAA,CAAAyB,MAAA,UAAAG,eAAA,CAAAF,IAAA,MAAA1B,QAAA;QACA,KAAAE,aAAA;MACA;QACA,KAAAA,aAAA;MACA;IACA;IACA2B,MAAA;MACA,KAAA5B,aAAA;MACA,KAAAC,aAAA;MAEA,MAAA4B,WAAA,OAAAC,eAAA;MACAD,WAAA,CAAAE,MAAA,kBAAAjC,QAAA;MACA+B,WAAA,CAAAE,MAAA,kBAAAhC,QAAA;MAEA,KAAAH,KAAA,CAAAoC,IAAA,wCAAAH,WAAA;QACAI,OAAA;UACA;QACA;MACA,GAAAC,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAtC,IAAA,CAAAuC,IAAA,YAAAD,QAAA,CAAAtC,IAAA,CAAAwC,OAAA;UACA,MAAAC,KAAA,GAAAH,QAAA,CAAAtC,IAAA,CAAAA,IAAA,CAAA0C,YAAA;UACAC,OAAA,CAAAC,GAAA,iBAAAH,KAAA;UACAI,YAAA,CAAAC,OAAA,iBAAAL,KAAA;UACA;QACA,WAAAH,QAAA,CAAAtC,IAAA,CAAAwC,OAAA;UACAO,KAAA;QACA,WAAAT,QAAA,CAAAtC,IAAA,CAAAwC,OAAA;UACAO,KAAA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QACAN,OAAA,CAAAM,KAAA,eAAAA,KAAA;MACA;IACA;IACAC,aAAA;MACAnD,KAAA,CAAAoC,IAAA,gDAAA9B,QAAA,EACAgC,IAAA,CAAAC,QAAA;QACA,KAAAa,kBAAA,GAAAb,QAAA,CAAAtC,IAAA,CAAAwC,OAAA;MACA,GACAQ,KAAA,CAAAC,KAAA;QACA,KAAAE,kBAAA,aAAAF,KAAA,CAAAX,QAAA,CAAAtC,IAAA,CAAAwC,OAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}